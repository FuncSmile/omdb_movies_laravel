import{r as c,j as e,L as p}from"./app-WUIF3dKM.js";import{u as f}from"./useTranslation-CTM0GqOe.js";function m({movie:t,showFavoriteButton:l=!0}){const{t:s}=f(),[n,o]=c.useState(!1),[i,d]=c.useState(!1),x=t.Poster&&t.Poster!=="N/A"?t.Poster:"/images/no-poster.svg";return e.jsxs(p,{href:`/movies/${t.imdbID}`,className:"cursor-pointer rounded-2xl bg-white/5 border border-white/10 overflow-hidden hover:scale-105 transition",children:[e.jsx("img",{src:x,alt:t.Title,loading:"lazy",decoding:"async",className:"h-64 w-full object-cover",onError:r=>{r.target.src="/images/no-poster.svg"}}),e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"font-semibold text-lg truncate",children:t.Title}),e.jsxs("div",{className:"flex items-center justify-between mt-2 text-sm text-gray-400",children:[e.jsx("span",{children:t.Year}),e.jsx("span",{className:"capitalize text-xs text-gray-300",children:t.Type})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between gap-2",children:[e.jsxs("p",{className:"text-xs text-red-400 hover:text-red-300",children:[s("view_detail")," â†’"]}),l&&e.jsx("button",{onClick:async r=>{if(r.preventDefault(),r.stopPropagation(),!(n||i)){o(!0);try{const a=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"";await fetch("/favorites",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":a,Accept:"application/json"},body:JSON.stringify(t)}),d(!0)}catch(a){console.error("Favorite error",a)}finally{o(!1)}}},className:"ml-2 px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-xs text-white",title:s("add_favorite"),children:s(n?"saving":i?"saved":"add_favorite")})]})]})]})}export{m as M};
