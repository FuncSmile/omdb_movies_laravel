import{r,j as e,H as v}from"./app-WUIF3dKM.js";import{A as g}from"./app-layout-CLKVycNS.js";import{u as j}from"./useTranslation-CTM0GqOe.js";/* empty css            */import"./createLucideIcon-BbeclwRr.js";import"./index-DmXVuRXr.js";import"./index-CWhwDHid.js";import"./index-DLxiWtzi.js";function E(x){const{id:o}=x,{t:s}=j(),[t,h]=r.useState(null),[i,l]=r.useState(!0),[n,c]=r.useState(!1),[d,p]=r.useState(!1);r.useEffect(()=>{(async()=>{try{l(!0);const u=await(await fetch(`/movie-detail?id=${encodeURIComponent(o)}`,{headers:{Accept:"application/json"}})).json();h(u)}catch(m){console.error(m)}finally{l(!1)}})()},[o]);const f=async()=>{if(!(!t||n||d)){c(!0);try{const a=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"";await fetch("/favorites",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":a,Accept:"application/json"},body:JSON.stringify(t)}),p(!0)}catch(a){console.error(a)}finally{c(!1)}}};return e.jsxs(g,{children:[e.jsx(v,{title:t?.Title||s("movie_detail")}),e.jsxs("div",{className:"p-6 text-white",children:[i&&e.jsx("p",{children:s("loading")}),!i&&t&&e.jsx("div",{className:"max-w-4xl mx-auto rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("div",{className:"md:w-1/3 w-full",children:e.jsx("img",{src:t.Poster&&t.Poster!=="N/A"?t.Poster:"/images/no-poster.svg",alt:t.Title,loading:"lazy",className:"w-full h-80 object-cover",onError:a=>{a.target.src="/images/no-poster.svg"}})}),e.jsxs("div",{className:"p-6 md:w-2/3 w-full",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:t.Title}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[t.Year," • ",e.jsx("span",{className:"text-red-400",children:t.Type})]}),e.jsx("p",{className:"mt-4 text-gray-300 leading-relaxed",children:t.Plot}),e.jsxs("div",{className:"mt-6 flex items-center gap-3",children:[e.jsx("button",{onClick:f,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-white transition",children:s(n?"saving":d?"saved":"add_favorite")}),e.jsxs("a",{href:`https://www.imdb.com/title/${t.imdbID}`,target:"_blank",rel:"noreferrer",className:"text-sm text-gray-400 hover:text-gray-200",children:[s("view_on_imdb")," ↗"]})]})]})]})})]})]})}export{E as default};
