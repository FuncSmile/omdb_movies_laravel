import{r as e,j as t}from"./app-WUIF3dKM.js";import{A as D}from"./app-layout-CLKVycNS.js";import{d as I}from"./index-DLxiWtzi.js";import{M as S}from"./movieCard-CX7uXoWV.js";import{u as E}from"./useTranslation-CTM0GqOe.js";/* empty css            */import"./createLucideIcon-BbeclwRr.js";import"./index-DmXVuRXr.js";import"./index-CWhwDHid.js";const L=[{title:"Dashboard",href:I()}];function F(){const{t:o,i18n:c}=E(),[p,x]=e.useState([]),[i,b]=e.useState(1),[l,m]=e.useState(!0),[u,g]=e.useState(!1),[v,j]=e.useState(0),n=e.useRef(null),d=e.useRef(null);e.useEffect(()=>{(async()=>{try{g(!0);const a=await(await fetch(`/search-movie?q=batman&page=${i}`,{headers:{Accept:"application/json"}})).json();if(a.Response==="True"){v===0&&j(Number(a.totalResults)),x(h=>{const M=a.Search.filter(R=>!h.some(w=>w.imdbID===R.imdbID));return[...h,...M]});const N=Math.ceil(Number(a.totalResults)/10);i>=N&&m(!1)}else m(!1)}catch(r){console.error("Fetch error:",r),m(!1)}finally{g(!1)}})()},[i]);const f=e.useCallback(s=>{const[r]=s;r.isIntersecting&&l&&!u&&b(a=>a+1)},[l,u]);e.useEffect(()=>(n.current&&n.current.disconnect(),n.current=new IntersectionObserver(f,{root:null,rootMargin:"200px",threshold:0}),d.current&&n.current.observe(d.current),()=>n.current?.disconnect()),[f]);const y=()=>{const s=c.language==="en"?"id":"en";c.changeLanguage(s)};return t.jsx(D,{breadcrumbs:L,children:t.jsxs("div",{className:"min-h-screen p-6 text-white",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h1",{className:"text-3xl font-bold",children:o("movie_list")}),t.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition text-sm font-medium",title:o("toggle_language"),children:["ðŸŒ ",c.language==="en"?"EN":"ID"]})]}),t.jsx("div",{className:"grid gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:p.map((s,r)=>t.jsx(S,{movie:s},`${s.imdbID}-${r}`))}),u&&t.jsx("p",{className:"text-gray-400 mt-6 text-center",children:o("loading")}),!l&&t.jsx("p",{className:"text-gray-500 mt-6 text-center",children:o("no_more_movies")}),t.jsx("div",{ref:d,className:"h-1"})]})})}export{F as default};
